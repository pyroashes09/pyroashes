<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>pyroashes.lol — Flappy Bird & Links</title>
  <meta name="color-scheme" content="dark">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0a0a0f; --panel:#11111a; --panel-2:#0f0f18;
      --ink:#e8e8ff; --muted:#a6a6c9;
      --accent:#7c3aed; --accent-2:#a78bfa; --accent-3:#4c1d95;
      --ring: 0 0 0 2px rgba(124,58,237,.45), 0 0 30px rgba(124,58,237,.25);
      --radius: 18px; --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
      --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom);
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color: transparent}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(124,58,237,.12), transparent 60%),
        radial-gradient(1000px 600px at -10% 110%, rgba(168,85,247,.10), transparent 60%),
        linear-gradient(180deg, #0b0b13, #06060a 40%, #05050a);
      background-color:var(--bg);
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:100;
      display:flex; align-items:center; gap:.75rem;
      padding: calc(.85rem + var(--safe-top)) 1rem .85rem;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(15,15,25,.75), rgba(15,15,25,.45));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .brand{display:flex; align-items:center; gap:.65rem; text-decoration:none; color:var(--ink)}
    .brand .logo{width:36px; height:36px; border-radius:12px; background: radial-gradient(circle at 30% 30%, var(--accent-2), var(--accent)); box-shadow:var(--shadow)}
    .brand h1{font-size:1.05rem; font-weight:800; letter-spacing:.02em; margin:0}
    .chip{display:inline-flex; align-items:center; gap:.5rem; font-size:.78rem; color: var(--accent-2); padding:.35rem .6rem; border:1px solid rgba(124,58,237,.4); border-radius:999px; background: rgba(124,58,237,.08)}
    .spacer{flex:1}

    /* Hamburger */
    .hamburger{width:44px; height:44px; border:none; border-radius:12px; cursor:pointer; background:linear-gradient(180deg, var(--panel), var(--panel-2)); color:var(--ink); display:grid; place-items:center; box-shadow:var(--shadow); transition: transform .2s ease, box-shadow .2s ease}
    .hamburger:active{ transform: scale(.98) }
    .hamburger:focus-visible{ outline:none; box-shadow: var(--ring) }
    .hamburger .bars, .hamburger .bars::before, .hamburger .bars::after{content:""; display:block; width:20px; height:2px; background:var(--ink); border-radius:2px; position:relative; transition: transform .25s ease, opacity .25s ease}
    .hamburger .bars::before{ position:absolute; top:-6px }
    .hamburger .bars::after{ position:absolute; top:6px }
    .hamburger[aria-pressed="true"] .bars{ transform: rotate(45deg) }
    .hamburger[aria-pressed="true"] .bars::before{ transform: rotate(90deg) translateX(-6px) }
    .hamburger[aria-pressed="true"] .bars::after{ opacity:0 }

    /* Tabs */
    .tabs{max-width:1100px; margin: 1.25rem auto; padding: 0 1rem}
    .tab-buttons{display:flex; gap:.5rem; margin-bottom: .75rem; align-items:center}
    .tab-btn{appearance:none; border:none; cursor:pointer; padding:.65rem .9rem; border-radius:12px; background:linear-gradient(180deg, var(--panel), var(--panel-2)); color:var(--muted); font-weight:600; letter-spacing:.02em; box-shadow: var(--shadow); transition: color .2s ease, transform .2s ease, box-shadow .2s ease, background .2s ease}
    .tab-btn.active{color:var(--ink); background: linear-gradient(180deg, rgba(124,58,237,.25), rgba(124,58,237,.18)); box-shadow: var(--ring)}
    .tab-btn:focus-visible{ outline:none; box-shadow: var(--ring) }
    .panel{display:none; background: linear-gradient(180deg, rgba(18,18,37,.9), rgba(14,14,26,.85)); border: 1px solid rgba(255,255,255,.06); border-radius: var(--radius); padding: 1rem; box-shadow: var(--shadow); animation: fade .25s ease}
    .panel.active{ display:block }
    @keyframes fade{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform: translateY(0) } }

    /* Grid */
    .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap: 1rem}
    .col-12{grid-column: span 12}

    .card{background: linear-gradient(180deg, rgba(18,18,40,.9), rgba(14,14,28,.9)); border: 1px solid rgba(255,255,255,.06); border-radius: var(--radius); padding: 1rem; box-shadow: var(--shadow); position:relative; overflow:hidden}
    .card::after{content:""; position:absolute; inset:0; background: radial-gradient(400px 120px at 20% -10%, rgba(124,58,237,.12), transparent 60%), radial-gradient(400px 120px at 120% 110%, rgba(168,85,247,.08), transparent 60%); pointer-events:none; mix-blend: screen}
    .card h3{ margin:.25rem 0 .5rem; font-size:1rem; letter-spacing:.02em }
    .muted{ color:var(--muted); font-size:.9rem }

    .link-row{display:flex; align-items:center; gap:.75rem; text-decoration:none; color:var(--ink); background: linear-gradient(180deg, rgba(124,58,237,.12), rgba(124,58,237,.08)); border: 1px solid rgba(124,58,237,.35); padding:1rem 1.1rem; border-radius:14px; box-shadow: var(--shadow); transition: transform .15s ease, box-shadow .2s ease, background .2s ease}
    .link-row:hover{ transform: translateY(-2px); box-shadow: var(--ring) }
    .link-icon{width:28px; height:28px; border-radius:9px; display:grid; place-items:center; background: radial-gradient(circle at 30% 30%, var(--accent-2), var(--accent)); box-shadow: inset 0 0 0 1px rgba(255,255,255,.15); font-weight: 900}

    /* Game wrapper + mobile sizing */
    .game-wrap{ background: radial-gradient(800px 300px at 50% -10%, rgba(124,58,237,.18), transparent 60%), #0b0b17; border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:.5rem; box-shadow: var(--shadow) }
    canvas.resp-canvas{ width:100%; height:480px; display:block; background:#0e0e18; border-radius:10px }
    @media (max-width: 640px){ canvas.resp-canvas{ height: min(64vh, 520px) } }

    .controls{display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.6rem}
    .controls .btn{ flex:1; min-width: 120px; padding:.9rem 1rem }

    .btn{appearance:none; border:none; cursor:pointer; border-radius:12px; padding:.7rem 1rem; font-weight:700; letter-spacing:.02em; background: linear-gradient(180deg, var(--accent), var(--accent-3)); color:white; box-shadow: var(--shadow); transition: transform .15s ease, box-shadow .2s ease, filter .2s ease}
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.05); box-shadow: var(--ring) }
    .btn:focus-visible{ outline:none; box-shadow: var(--ring) }

    .footer{ opacity:.7; font-size:.8rem; text-align:center; padding:1.2rem 1rem calc(1.2rem + var(--safe-bottom)) }
    a{ color:var(--accent-2) }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0 }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior: auto !important }
    }
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <a class="brand" href="#" aria-label="Home">
      <span class="logo" aria-hidden="true"></span>
      <h1>pyroashes.lol</h1>
      <span class="chip">Dark · Purple</span>
    </a>
    <div class="spacer"></div>
    <button id="hamburger" class="hamburger" aria-label="Toggle section" aria-controls="panels" aria-pressed="false" title="Switch between Games and Links">
      <span class="bars" aria-hidden="true"></span>
    </button>
  </header>

  <main class="tabs" id="panels">
    <div class="tab-buttons" aria-hidden="true">
      <button class="tab-btn active" data-tab="games">Games</button>
      <button class="tab-btn" data-tab="links">Links</button>
    </div>

    <!-- GAMES -->
    <section id="panel-games" class="panel active" role="region" aria-label="Games">
      <div class="grid">
        <div class="card col-12">
          <h3>Flappy Bird <span class="muted">· tap / click / space to flap</span></h3>
          <div class="game-wrap">
            <canvas id="flappy" class="resp-canvas" width="720" height="480" aria-label="Flappy Bird"></canvas>
          </div>
          <div class="controls">
            <button class="btn" id="flappy-start">Start / Restart</button>
            <button class="btn" id="flappy-pause">Pause</button>
            <span class="chip">Score: <strong id="score">0</strong> · Best: <strong id="best">0</strong></span>
          </div>
          <p class="muted" style="margin:.6rem 0 0">Tip: press <kbd>H</kbd> to toggle between Games and Links.</p>
        </div>
      </div>
    </section>

    <!-- LINKS -->
    <section id="panel-links" class="panel" role="region" aria-label="Links">
      <div class="grid">
        <div class="card col-12">
          <h3>Your Profiles</h3>

          <!-- Discord -->
          <a class="link-row" href="https://discord.com/users/1201937202808885320" target="_blank" rel="noopener">
            <span class="link-icon" aria-hidden="true">D</span>
            <div>
              <div style="font-weight:700">Discord</div>
              <div class="muted">@pyroashes — user ID 1201937202808885320</div>
            </div>
          </a>

          <div style="height:.6rem"></div>

          <!-- GitHub -->
          <a class="link-row" href="https://github.com/pyroashes09" target="_blank" rel="noopener">
            <span class="link-icon" aria-hidden="true">G</span>
            <div>
              <div style="font-weight:700">GitHub</div>
              <div class="muted">github.com/pyroashes09</div>
            </div>
          </a>

          <div style="height:.6rem"></div>

          <!-- Steam -->
          <a class="link-row" href="https://steamcommunity.com/profiles/76561199470936572/" target="_blank" rel="noopener">
            <span class="link-icon" aria-hidden="true">S</span>
            <div>
              <div style="font-weight:700">Steam</div>
              <div class="muted">steamcommunity.com/profiles/76561199470936572</div>
            </div>
          </a>

          <p class="muted" style="margin-top:.9rem">Links open in a new tab.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span class="muted">© <span id="year"></span> · pyroashes.lol</span>
  </footer>

  <script>
  /* ===== Global UI: tabs / hamburger ===== */
  const btns = Array.from(document.querySelectorAll('.tab-btn'));
  const hamburger = document.getElementById('hamburger');
  const panelGames = document.getElementById('panel-games');
  const panelLinks = document.getElementById('panel-links');

  function setActive(tab){
    const isGames = tab === 'games';
    panelGames.classList.toggle('active', isGames);
    panelLinks.classList.toggle('active', !isGames);
    btns.forEach(b=> b.classList.toggle('active', b.dataset.tab === tab));
    hamburger.setAttribute('aria-pressed', (!isGames).toString());

    // Pause Flappy when leaving, resume when returning
    if (window.flappy){
      if (isGames){ window.flappy.resume(); }
      else { window.flappy.pause(); }
    }

    // Smooth scroll to top on mobile
    if (matchMedia('(max-width: 640px)').matches) window.scrollTo({top:0, behavior:'smooth'});
  }
  setActive('games');
  btns.forEach(b => b.addEventListener('click', () => setActive(b.dataset.tab)));
  hamburger.addEventListener('click', () => {
    const showingGames = panelGames.classList.contains('active');
    setActive(showingGames ? 'links' : 'games');
  });
  addEventListener('keydown', (e) => { if (e.key.toLowerCase() === 'h'){ hamburger.click(); } });
  document.getElementById('year').textContent = new Date().getFullYear();

  /* ===== Utility: lock touch scrolling on canvas ===== */
  function lockTouch(el){
    el.addEventListener('touchmove', e => { e.preventDefault(); }, {passive:false});
  }

  /* ===== Flappy Bird (mobile/desktop + tab-safe) ===== */
  ;(function(){
    const c = document.getElementById('flappy');
    const ctx = c.getContext('2d', { alpha: false });
    const scoreEl = document.getElementById('score');
    const bestEl = document.getElementById('best');
    lockTouch(c);

    let W = c.width, H = c.height;

    function resizeCanvas(){
      const rect = c.getBoundingClientRect();
      // Skip resize when hidden (display:none -> 0 size). Prevents "reset" when switching tabs.
      if (rect.width === 0 || rect.height === 0) return;
      const dpr = Math.min(window.devicePixelRatio || 1, 2);
      c.width = Math.floor(rect.width * dpr);
      c.height = Math.floor(rect.height * dpr);
      W = rect.width; H = rect.height;
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    const ro = new ResizeObserver(resizeCanvas); ro.observe(c);
    resizeCanvas();

    let running=false, gameOver=false, score=0, best=+localStorage.getItem('flappy_best_v2')||0;
    let paused=false; // controlled by UI and tab switch
    bestEl.textContent = best;

    const bird = { x: 160, y: 160, r: 12, vy: 0 };
    const G = 0.45, FLAP = -8.5, MAX_FALL=12;

    const pipes = []; const GAP=140; const PIPE_W=64; let spawn=0;

    function reset(){
      running=false; gameOver=false; score=0;
      bird.x = Math.max(140, W*0.25); bird.y = H*0.45; bird.vy = 0;
      pipes.length=0; spawn=0; scoreEl.textContent=score;
    }
    function spawnPipe(){
      const margin = 50;
      const topH = Math.random()*(H - GAP - margin*2) + margin;
      pipes.push({ x: W + PIPE_W, top: topH, bottom: topH + GAP, passed:false });
    }
    function flap(){
      if (!running && !gameOver) running = true;
      if (gameOver){ reset(); running=true; }
      bird.vy = FLAP;
    }

    c.addEventListener('mousedown', flap);
    c.addEventListener('touchstart', (e)=>{ e.preventDefault(); flap(); }, {passive:false});
    document.getElementById('flappy-start').addEventListener('click', ()=>{ reset(); running=true; paused=false; });
    document.getElementById('flappy-pause').addEventListener('click', ()=> { paused = !paused; });

    addEventListener('keydown', (e)=>{ if(e.key===' '){ e.preventDefault(); flap(); } });

    function rr(ctx,x,y,w,h,r,fill=true,stroke=false){
      if (w<2*r) r=w/2; if(h<2*r) r=h/2;
      ctx.beginPath();
      ctx.moveTo(x+r,y);
      ctx.arcTo(x+w,y,x+w,y+h,r);
      ctx.arcTo(x+w,y+h,x,y+h,r);
      ctx.arcTo(x,y+h,x,y,r);
      ctx.arcTo(x,y,x+w,y,r);
      ctx.closePath();
      if(fill)ctx.fill(); if(stroke)ctx.stroke();
    }

    function drawBG(){
      const g = ctx.createLinearGradient(0,0,0,H);
      g.addColorStop(0, '#0b0b18'); g.addColorStop(1, '#070712');
      ctx.fillStyle=g; ctx.fillRect(0,0,W,H);
      ctx.globalAlpha=.25;
      for (let i=0;i<60;i++){
        const x = (i*113) % (W/1); const y = (i*71) % (H/1);
        ctx.fillStyle = i%2 ? '#7c3aed' : '#a78bfa'; ctx.fillRect(x,y,2,2);
      }
      ctx.globalAlpha=1;
    }
    function drawBird(){
      ctx.save(); ctx.translate(bird.x, bird.y); const angle = Math.max(-0.5, Math.min(0.7, bird.vy/10)); ctx.rotate(angle);
      const grad = ctx.createLinearGradient(-bird.r,-bird.r,bird.r,bird.r); grad.addColorStop(0,'#a78bfa'); grad.addColorStop(1,'#7c3aed'); ctx.fillStyle = grad;
      rr(ctx,-bird.r,-bird.r,bird.r*2,bird.r*2,10,true);
      ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(6,-4,5,0,Math.PI*2); ctx.fill();
      ctx.fillStyle='#0b0b12'; ctx.beginPath(); ctx.arc(7,-4,2.5,0,Math.PI*2); ctx.fill();
      ctx.fillStyle='rgba(255,255,255,.25)'; rr(ctx,-8,4,16,10,5,true);
      ctx.restore();
    }
    function drawPipes(){
      for (const p of pipes){
        ctx.fillStyle='rgba(167,139,250,.9)'; rr(ctx,p.x,0,PIPE_W,p.top,10,true);
        ctx.fillStyle='rgba(124,58,237,.95)'; rr(ctx,p.x,p.bottom,PIPE_W,H-p.bottom,10,true);
        ctx.strokeStyle='rgba(255,255,255,.12)'; ctx.lineWidth=2;
        rr(ctx,p.x+1,1,PIPE_W-2,p.top-2,9,false,true);
        rr(ctx,p.x+1,p.bottom+1,PIPE_W-2,H-p.bottom-2,9,false,true);
      }
    }
    function hud(){
      ctx.fillStyle = 'rgba(0,0,0,.35)'; rr(ctx, W-160, 14, 146, 36, 10, true);
      ctx.fillStyle='#eaeaff'; ctx.font='700 18px Inter, sans-serif'; ctx.fillText('Score: '+score, W-150, 38);
    }
    function collide(){
      if (bird.y + bird.r >= H || bird.y - bird.r <= 0) return true;
      for (const p of pipes){
        const inX = bird.x + bird.r > p.x && bird.x - bird.r < p.x + PIPE_W;
        const inY = !(bird.y - bird.r > p.top && bird.y + bird.r < p.bottom);
        if (inX && inY) return true;
      }
      return false;
    }

    function loop(){
      drawBG();
      if (!paused){
        if (running){
          bird.vy = Math.min(MAX_FALL, bird.vy + G); bird.y += bird.vy;
          spawn -= 1; if (spawn<=0){ spawnPipe(); spawn = (PIPE_W + 140); }
          for (const p of pipes){ p.x -= 2.4; if (!p.passed && p.x + PIPE_W < bird.x){ p.passed=true; score++; scoreEl.textContent=score; } }
          while (pipes.length && pipes[0].x + PIPE_W < -10) pipes.shift();
          if (collide()){
            running=false; gameOver=true;
            const best = Math.max(+localStorage.getItem('flappy_best_v2')||0, score);
            localStorage.setItem('flappy_best_v2', best); bestEl.textContent=best;
          }
        }
      }
      drawPipes(); drawBird(); hud();
      if (!running){
        ctx.fillStyle='rgba(10,10,15,.65)'; rr(ctx, W/2-160, H/2-90, 320, 180, 16, true);
        ctx.textAlign='center'; ctx.fillStyle='#eaeaff'; ctx.font='800 28px Inter, sans-serif';
        ctx.fillText(gameOver ? 'Game Over' : 'Flap to Start', W/2, H/2-20);
        ctx.font='600 14px Inter, sans-serif'; ctx.fillStyle='rgba(220,220,255,.85)';
        ctx.fillText(gameOver ? 'Press Start or Space' : 'Tap/Click/Space to flap', W/2, H/2+10); ctx.textAlign='start';
      }
      requestAnimationFrame(loop);
    }

    // Seed a few pipes for depth
    for (let i=0;i<3;i++) pipes.push({x: 260 + i*200, top: 60 + i*15, bottom: 60 + i*15 + GAP, passed:false});
    loop();

    // Expose pause/resume so tab switch can control without resetting
    window.flappy = {
      pause(){ paused = true; },
      resume(){
        paused = false;
        // Ensure canvas has correct size after returning from hidden state
        resizeCanvas();
      }
    };
  })();
  </script>
</body>
</html>
